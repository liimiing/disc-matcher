# Discogs 音乐专辑匹配器 - 使用说明

## 快速开始

### 1. 安装依赖

打开命令行，在项目目录下运行：
```bash
pip install -r requirements.txt
```

### 2. 获取 Discogs Token

1. 访问 https://www.discogs.com/settings/developers
2. 登录你的 Discogs 账号
3. 点击 "Generate new token"
4. 复制生成的 Token（只显示一次，请妥善保存）

### 3. 运行程序

**Windows 用户：**
- 双击 `run.bat` 文件，或
- 在命令行运行：`python disc_matcher.py`

**Mac/Linux 用户：**
- 在终端运行：`python3 disc_matcher.py`

## 使用步骤

### 第一步：选择文件夹

1. 点击 "选择文件夹" 按钮
2. 选择包含音乐专辑文件夹的**根目录**
3. 程序会自动扫描**二级子文件夹**

**文件夹结构示例：**
```
音乐库/
├── 艺术家A/
│   ├── 专辑1/  ← 这些二级文件夹会被处理
│   └── 专辑2/
└── 艺术家B/
    ├── 专辑3/
    └── 专辑4/
```

### 第二步：输入 Token

在顶部的 "Discogs Token" 输入框中粘贴你的 Token

### 第三步：开始处理

1. 点击 "开始处理" 按钮
2. 程序会逐一搜索每个文件夹名称
3. 如果找到多个匹配结果，会弹出选择对话框让你选择
4. 处理完成后，每个文件夹会包含：
   - `cover.jpg` - 专辑封面图片
   - `album_info.json` - 专辑详细信息

### 第四步：查看和管理

- **查看详情**：双击列表中的项目，或右键选择 "查看详情"
- **手动选择**：如果自动匹配错误，右键选择 "选择专辑" 重新搜索
- **重命名文件夹**：右键选择 "重命名文件夹"，应用建议的名称格式
- **批量重命名**：点击 "批量重命名" 按钮，一次性重命名所有已完成的文件夹
- **打开文件夹**：右键选择 "打开文件夹"，在文件管理器中打开

### 第五步：导出 Excel

1. 点击 "导出Excel" 按钮
2. 选择保存位置
3. Excel 文件包含所有专辑的详细信息

## 功能特点

✅ **自动搜索**：根据文件夹名称自动匹配 Discogs 数据库  
✅ **智能选择**：单个结果自动选择，多个结果提供选择界面  
✅ **封面下载**：自动下载高质量专辑封面  
✅ **信息保存**：保存 JSON 格式的详细信息  
✅ **Excel 导出**：导出所有信息到 Excel 表格  
✅ **智能重命名**：建议 "音乐人 -年份- 专辑名" 格式  
✅ **批量操作**：支持批量重命名  
✅ **进度显示**：实时显示处理进度  

## 导出的信息

Excel 文件包含以下列：
- 文件夹名
- 音乐人
- 专辑名
- 出版年份
- 唱片厂牌
- 厂牌编号
- 音乐风格
- 风格标签
- 备注信息
- Discogs ID
- 国家
- 文件夹路径

## 常见问题

**Q: 为什么有些文件夹显示"未找到"？**  
A: 可能是文件夹名称与 Discogs 数据库中的名称差异较大，可以尝试手动选择或修改文件夹名称后重新搜索。

**Q: 可以处理多少文件夹？**  
A: 理论上没有限制，但 Discogs API 有速率限制，程序会自动控制请求频率。

**Q: 重命名会覆盖现有文件夹吗？**  
A: 不会，如果目标文件夹已存在，程序会跳过重命名。

**Q: 封面图片是什么格式？**  
A: 下载的封面保存为 JPG 格式，文件名固定为 `cover.jpg`。

**Q: 如何处理特殊字符？**  
A: 程序会自动处理文件夹名称中的特殊字符，清理后用于搜索。

## 注意事项

⚠️ **备份重要数据**：虽然程序不会删除文件，但重命名操作不可逆，建议先备份  
⚠️ **网络连接**：需要稳定的网络连接来访问 Discogs API 和下载封面  
⚠️ **API 限制**：Discogs API 有速率限制，处理大量文件夹时请耐心等待  
⚠️ **Token 安全**：请妥善保管你的 Discogs Token，不要分享给他人  

## 技术支持

如遇到问题，请检查：
1. Python 版本是否为 3.7 或更高
2. 是否已安装所有依赖包
3. Discogs Token 是否有效
4. 网络连接是否正常

祝使用愉快！🎵

